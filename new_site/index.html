<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Friendship Sloop Society Home Page</title>
    <link rel="stylesheet" href="/css/styles.css">
    <style>
        .three-column-layout {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
        }
        .column {
            flex: 1 1 30%;
            max-width: 30%;
            box-sizing: border-box;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }
        .column-2-rows {
            display: flex;
            flex-direction: column;
            height: 100%;
        }
        .row-top {
            flex: 0 1 25%;
            background-color: #e9e9e9;
            padding: 10px;
            box-sizing: border-box;
        }
        .row-bottom {
            flex: 1 1 75%;
            background-color: #d9d9d9;
            padding: 10px;
            box-sizing: border-box;
        }
        .featured-content {
            display: flex;
            align-items: flex-start;
            gap: 20px;
        }
        .image-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 50%;
        }
        .featured-content img.book-cover {
            width: 100%;
            height: auto;
        }
        .description {
            flex: 1;
            width: 50%;
        }
        .paypal-button {
            display: block;
            margin-top: 10px;
        }
        .two-column-layout {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }
        .two-column {
            flex: 1 1 45%;
            max-width: 45%;
            box-sizing: border-box;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }

        .full-width-column {
            display: block;
            text-align: center; /* Ensure text is centered if needed */
        }
        .full-width-column img {
            display: block;
            margin: 0 auto;
            max-width: 100%; /* Ensure the image is responsive */
            height: auto;
        }

        .four-column-layout {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
        }
        .four-column {
            flex: 1 1 22%;
            max-width: 22%;
            box-sizing: border-box;
            padding: 10px;
            background-color: #f9f9f9;
            border: 1px solid #ddd;
        }
        .carousel {
            position: relative;
            width: 100%;
            overflow: hidden;
        }
        .carousel-inner {
            display: flex;
            transition: transform 0.5s ease;
        }
        .carousel-item {
            min-width: 100%;
            box-sizing: border-box;
            text-align: center;
        }
        .carousel-item img {
            max-width: 100%;
            height: auto;
        }
        @media (max-width: 768px) {
            .column {
                flex: 1 1 45%;
                max-width: 45%;
            }
            .featured-content {
                flex-direction: column;
                align-items: center;
            }
            .image-container {
                width: 100%;
            }
            .featured-content img.book-cover {
                width: 100%;
            }
            .description {
                width: 100%;
            }
            .two-column {
                flex: 1 1 100%;
                max-width: 100%;
            }
            .four-column {
                flex: 1 1 45%;
                max-width: 45%;
            }
        }
        @media (max-width: 480px) {
            .column {
                flex: 1 1 100%;
                max-width: 100%;
            }
            .four-column {
                flex: 1 1 100%;
                max-width: 100%;
            }
        }
    </style>
</head>
<body>
    <div id="header-placeholder"></div>
    <script src="./js/header.js"></script>

    <div id="nav-placeholder"></div>
    <script src="./js/nav.js"></script>
    
    <div class="container">
        <main class="content" id="main-content">
            <div id="main">
                <div class="three-column-layout">
                    <div class="column">
                        <div class="blog-column">
                            <h2>Officers Blog</h2>
                            <p>Check here often for any offical messages from the Commodore or FSS committee.</p>
                            <hr/>
                            <div class="blog-post">
                                <h3>FSS Annual Meeting</h3>
                                <p>The Annual Meeting Schedule includes social time, a live auction, a business meeting with awards, a cash bar and cocktails, a buffet dinner, and evening cocktails and snacks. Attendees are encouraged to bring photos, stories, and items for the auctions, with proceeds benefiting the FSS general fund and Scholarship fund.</p>
                                <a href="./blog/officers/officers1.html">Read More</a>
                            </div>
                            <div class="blog-post">
                                <h3>Annual Message 2024</h3>
                                <p>The Friendship Sloop Society invites members to the 2024 Annual Meeting on November 23rd in South Portland, Maine. Join fellow enthusiasts to discuss the past year, plan future events, and enjoy auctions, food, and drinks. Membership renewals and donations support the Society's mission and are tax-deductible.</p>
                                <a href="./blog/officers/officers2.html">Read More</a>
                            </div>
                        </div>

                    </div>
                    <div class="column column-2-rows">
                        <div class="row-top">
                            <h3>Donate Now!</h3>
                            <p>Donate now button goes here</p>
                        </div>
                        <div class="row-bottom">
                            <h3>Lasting Friendships</h3>
                            <div class="featured-content">
                                <div class="image-container">
                                    <img src="img/bookcover.jpg" alt="Book Cover" class="book-cover">
                                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" target="_top" class="paypal-button">
                                        <input type="hidden" name="cmd" value="_s-xclick">
                                        <input type="hidden" name="hosted_button_id" value="QXCUH754288U4">
                                        <input type="image" src="https://www.paypalobjects.com/en_US/i/btn/btn_buynowCC_LG.gif" border="0" name="submit" alt="PayPal - The safer, easier way to pay online!" width="171" height="47">
                                        <img alt="" border="0" src="https://www.paypalobjects.com/en_US/i/scr/pixel.gif" width="1" height="1">
                                    </form>
                                </div>
                                <div class="description">
                                    <p>Originally developed in the late 1800s as a working boat and fishing platform, the Friendship sloop has survived as a type and has become recognized as an American sailing classic. This is the story of a family of boats and how they weathered more than a century of change and transition, and why they still have a passionate following today.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="column">
                        <h2>Our Sponsors</h2>
                        <div class="sponsor-container" id="sponsor-container">
                            <!-- Sponsor content will be inserted here by JavaScript -->
                        </div>
                    </div>
                </div>
                <div class="two-column-layout">
                    <div class="two-column">
                        <h2>2024 Calendar of Events</h2>
                        <!-- Placeholder for events -->
                        <div id="events-placeholder"></div>
                    </div>
                    <div class="two-column">
                        <h2>Chandlery</h2>
                        <p>Content for chandlery e-shop goes here</p>
                    </div>
                </div>
                
                <div class="full-width-column">
                    <h2>Society Photo Gallery</h2>
                    <p>The image below is the Society's <strong>Photo of the Year!</strong></p>
                    <p>Clicking on this photo will take you to the Society's Photo Gallery, a member contributed set of photos showing the best of the members that make the Society what it is!</p>
                    <p><a href="/gallery/index.html"><img src="/img/gallery/poty2024.jpg" alt="Photo of the Year"/></a></p>
                </div>

                <div class="four-column-layout">
                    <div class="four-column">
                        <h3>Spotlight</h3>
                        <div class="carousel">
                            <div class="carousel-inner" id="spotlight-container">
                                <!-- Carousel items will be inserted here by JavaScript -->
                            </div>
                        </div>
                    </div>
                    <div class="four-column">
                        <h3>Cruising Guide</h3>
                        <p><a href="https://fssorg.wordpress.com" target="_blank"><img src="/img/cruisingguide.jpg"/></a></p>
                        <p><strong>There and Back Again</strong> is an on line resource for members of the Friendship Sloop Society to share knowledge concerning safe places to anchor or pick up moorings while cruising, or while in transit to and from Rockland for the annual Friendship Sloop Homecoming.</p>
                    </div>
                    <div class="four-column">
                        <h3>Sloop Provenance</h3>
                        <p>Explore the sloop's ownership and name history since the start of the Society</p>
                        <p>TODO: finish me!</p>
                        <p><a href="/boatowners.html">Sloop Ownership History</a></p>
                        <p>Sloop Name link goes here</p>
                    </div>
                    <div class="four-column">
                        <h3>Column 4</h3>
                        <p>Content for the fourth column of the four-column layout goes here.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>
    <div id="footer-placeholder"></div>
    <script src="./js/footer.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.0/papaparse.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const spotlightCsvFilePath = 'spotlight.csv';
            const sponsorsCsvFilePath = 'sponsors.csv';
            const spotlightContainer = document.getElementById('spotlight-container');
            const sponsorContainer = document.getElementById('sponsor-container');
            let currentIndex = 0;

            // Load spotlight carousel
            Papa.parse(spotlightCsvFilePath, {
                download: true,
                header: true,
                complete: function(results) {
                    const data = results.data;
                    data.forEach((item, index) => {
                        const carouselItem = document.createElement('div');
                        carouselItem.className = 'carousel-item';
                        carouselItem.innerHTML = `
                            <a href="/pdf/spotlight/${item.file}" target="_blank">
                                <img src="/img/spotlight/${item.image}" alt="${item.file}">
                            </a>
                        `;
                        spotlightContainer.appendChild(carouselItem);
                    });
                    showSlide(currentIndex);
                    setInterval(() => {
                        currentIndex = (currentIndex + 1) % data.length;
                        showSlide(currentIndex);
                    }, 10000); // Change image every 10 seconds
                }
            });

            function showSlide(index) {
                const items = document.querySelectorAll('.carousel-item');
                items.forEach((item, i) => {
                    item.style.transform = `translateX(${(i - index) * 100}%)`;
                });
            }

            // Load random sponsor
            Papa.parse(sponsorsCsvFilePath, {
                download: true,
                header: true,
                complete: function(results) {
                    const data = results.data;
                    const randomIndex = Math.floor(Math.random() * data.length);
                    const sponsor = data[randomIndex];

                    const sponsorContent = document.createElement('div');
                    sponsorContent.innerHTML = `
                        <a href="${sponsor.URL}" target="_blank">
                            <p>${sponsor.Title}</p>
                            <img src="/img/sponsors/${sponsor.image}" alt="${sponsor.Title}">
                        </a>
                    `;
                    sponsorContainer.appendChild(sponsorContent);
                }
            });
        });
    </script>
    
    <!-- Script to load events from events/index.html -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            fetch('events/index.html')
                .then(response => response.text())
                .then(data => {
                    // Create a temporary DOM element to parse the fetched HTML
                    const tempDiv = document.createElement('div');
                    tempDiv.innerHTML = data;

                    // Extract the left-column and right-column sections from the fetched HTML
                    const leftColumns = tempDiv.querySelectorAll('.left-column');
                    const rightColumns = tempDiv.querySelectorAll('.right-column');

                    // Create a container for the filtered events
                    const eventsContainer = document.createElement('div');
                    eventsContainer.classList.add('filtered-events');

                    // Append the filtered columns to the events container
                    leftColumns.forEach((leftColumn, index) => {
                        const eventRow = document.createElement('div');
                        eventRow.classList.add('two-column-layout');

                        const rightColumn = rightColumns[index];

                        // Remove HTML tags from the left-column content and wrap the text in a <strong> tag
                        const leftColumnText = leftColumn.textContent.trim();
                        const strongElement = document.createElement('strong');
                        strongElement.textContent = leftColumnText;

                        const leftColumnWrapper = document.createElement('div');
                        leftColumnWrapper.classList.add('left-column');
                        leftColumnWrapper.appendChild(strongElement);

                        eventRow.appendChild(leftColumnWrapper);

                        if (rightColumn) {
                            // Remove header tags from the right-column content but preserve <br> tags
                            const rightColumnHTML = rightColumn.innerHTML.replace(/<\/?h[1-6][^>]*>/g, '');

                            const rightColumnWrapper = document.createElement('div');
                            rightColumnWrapper.classList.add('right-column');
                            rightColumnWrapper.innerHTML = rightColumnHTML;

                            eventRow.appendChild(rightColumnWrapper);
                        }

                        eventsContainer.appendChild(eventRow);
                    });

                    // Insert the events container into the placeholder
                    document.getElementById('events-placeholder').appendChild(eventsContainer);
                })
                .catch(error => console.error('Error loading events:', error));
        });
    </script>
</body>
</html>